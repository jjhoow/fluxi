{% extends "base.html" %}

{% block title %}Criar Ferramenta - Step {{ step_atual }} de 7{% endblock %}

{% block extra_css %}
<style>
    .wizard-progress {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        padding: 0;
        list-style: none;
    }
    
    .wizard-progress li {
        flex: 1;
        text-align: center;
        position: relative;
        font-size: 0.875rem;
    }
    
    .wizard-progress li::before {
        content: attr(data-step);
        display: block;
        width: 44px;
        height: 44px;
        line-height: 44px;
        margin: 0 auto 0.5rem;
        background: #e5e7eb;
        border-radius: 50%;
        color: #9ca3af;
        font-weight: 700;
        font-size: 1.125rem;
        transition: all 0.3s;
    }
    
    .wizard-progress li.completed::before {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        content: "✓";
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    
    .wizard-progress li.active::before {
        background: linear-gradient(135deg, #8b5cf6 0%, #C75B9B 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        transform: scale(1.1);
    }
    
    .wizard-progress li::after {
        content: "";
        position: absolute;
        top: 20px;
        left: 50%;
        width: 100%;
        height: 2px;
        background: #dbdbdb;
        z-index: -1;
    }
    
    .wizard-progress li:last-child::after {
        display: none;
    }
    
    .wizard-progress li.completed::after {
        background: #48c774;
    }
    
    .code-editor {
        font-family: 'Courier New', monospace;
        font-size: 14px;
        line-height: 1.5;
        background: #f5f5f5;
        border: 1px solid #dbdbdb;
        border-radius: 4px;
        padding: 1rem;
    }
    
    .json-viewer {
        background: #282c34;
        color: #abb2bf;
        padding: 1rem;
        border-radius: 4px;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 14px;
    }
    
    .json-key { color: #e06c75; }
    .json-string { color: #98c379; }
    .json-number { color: #d19a66; }
    .json-boolean { color: #56b6c2; }
    
    .curl-preview {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 1rem;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        overflow-x: auto;
    }
    
    .param-item {
        background: #f5f5f5;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1rem;
        border-left: 4px solid #667eea;
    }
    
    .variable-item {
        background: #fff5f5;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1rem;
        border-left: 4px solid #f14668;
    }
    
    .help-box {
        background: #f0f7ff;
        border-left: 4px solid #3273dc;
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 4px;
    }
    
    .help-box .icon {
        color: #3273dc;
    }
</style>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div style="margin-bottom: 2rem;">
    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
        <div style="width: 56px; height: 56px; border-radius: 12px; background: linear-gradient(135deg, #8b5cf6 0%, #C75B9B 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
            <i class="fas fa-magic" style="color: white; font-size: 1.5rem;"></i>
        </div>
        <div style="flex: 1; min-width: 0;">
            <h1 class="title is-3" style="margin-bottom: 0.5rem !important; line-height: 1.2; color: #1f2937;">
                Criar Nova Ferramenta
            </h1>
            <p class="subtitle is-6" style="color: #6b7280; margin-bottom: 0 !important; line-height: 1.4;">
                <strong style="color: #8b5cf6;">Step {{ step_atual }}</strong> de 7 - Wizard de criação guiado
            </p>
        </div>
    </div>
</div>
    <!-- Progress Bar -->
    <ul class="wizard-progress">
        <li data-step="1" class="{% if step_atual >= 1 %}{% if step_atual > 1 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Básico</span>
        </li>
        <li data-step="2" class="{% if step_atual >= 2 %}{% if step_atual > 2 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Parâmetros</span>
        </li>
        <li data-step="3" class="{% if step_atual >= 3 %}{% if step_atual > 3 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Configuração</span>
        </li>
        <li data-step="4" class="{% if step_atual >= 4 %}{% if step_atual > 4 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Testar</span>
        </li>
        <li data-step="5" class="{% if step_atual >= 5 %}{% if step_atual > 5 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Mapeamento</span>
        </li>
        <li data-step="6" class="{% if step_atual >= 6 %}{% if step_atual > 6 %}completed{% else %}active{% endif %}{% endif %}">
            <span>Destino</span>
        </li>
        <li data-step="7" class="{% if step_atual == 7 %}active{% endif %}">
            <span>Variáveis</span>
        </li>
    </ul>

<!-- Mensagens -->
{% if erro %}
<div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 12px; padding: 1.25rem; margin-bottom: 2rem;">
    <p style="color: #991b1b; font-weight: 600;">
        <i class="fas fa-exclamation-circle"></i> <strong>Erro:</strong> {{ erro }}
    </p>
</div>
{% endif %}

{% if sucesso %}
<div style="background: #dcfce7; border: 2px solid #10b981; border-radius: 12px; padding: 1.25rem; margin-bottom: 2rem;">
    <p style="color: #166534; font-weight: 600;">
        <i class="fas fa-check-circle"></i> {{ sucesso }}
    </p>
</div>
{% endif %}

    <!-- Conteúdo do Step -->
    <div class="columns">
        <div class="column is-10 is-offset-1">
            {% block wizard_content %}{% endblock %}
        </div>
    </div>
</div>
{% endblock %}
